<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PDF Optimizer ‚Äì Clean PDF Online Free | QuickTool</title>
  <meta name="description" content="Free PDF optimizer. Remove junk metadata/fonts (5-30% smaller). Perfect for text assignments. Max 15MB.">
  <link rel="canonical" href="https://quicktool.pages.dev/pdf-compressor.html">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
    .container { max-width: 800px; margin: 0 auto; background: rgba(0,0,0,0.8); border-radius: 20px; padding: 30px; color: white; }
    h1 { text-align: center; margin-bottom: 10px; font-size: 1.8em; }
    .subtitle { text-align: center; opacity: 0.9; margin-bottom: 30px; }
    #upload { display: none; }
    label[for="upload"] { display: block; border: 3px dashed #4ade80; border-radius: 15px; padding: 40px; text-align: center; cursor: pointer; transition: all 0.3s; }
    label[for="upload"]:hover { background: rgba(74, 222, 128, 0.1); border-color: #22c55e; }
    label[for="upload"].dragover { border-color: #22c55e; background: rgba(74, 222, 128, 0.2); }
    #fileInfo { margin: 20px 0; text-align: center; font-weight: bold; color: #4ade80; }
    .info-box { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin: 15px 0; font-size: 0.9em; }
    #optimizeBtn { width: 100%; background: linear-gradient(135deg, #4ade80, #22c55e); color: white; border: none; padding: 15px; border-radius: 15px; font-size: 1.2em; cursor: pointer; margin: 20px 0; transition: transform 0.2s; }
    #optimizeBtn:hover:not(:disabled) { transform: scale(1.02); }
    #optimizeBtn:disabled { opacity: 0.5; cursor: not-allowed; }
    #progress { display: none; text-align: center; margin: 20px 0; }
    #progressBar { width: 100%; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden; }
    #progressFill { height: 100%; background: linear-gradient(90deg, #4ade80, #22c55e); width: 0%; transition: width 0.3s; }
    #result { display: none; margin: 20px 0; text-align: center; }
    #resultInfo { background: rgba(74, 222, 128, 0.2); padding: 20px; border-radius: 15px; }
    #downloadLink { display: none; text-align: center; margin-top: 20px; }
    #downloadLink a { display: inline-block; background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: bold; }
    .status { padding: 10px; border-radius: 8px; margin: 10px 0; text-align: center; }
    .success { background: rgba(74, 222, 128, 0.2); color: #4ade80; }
    .neutral { background: rgba(255,255,255,0.1); color: white; }
  </style>
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>üìÑ PDF Optimizer</h1>
    <p class="subtitle">Clean metadata/fonts (5-30% smaller for text PDFs). Use Scan-to-PDF for image compression.</p>
    
    <div class="info-box">
      ‚úÖ <strong>Works best:</strong> Text assignments, notes<br>
      ‚ùå <strong>Image PDFs:</strong> Use <a href="scan-to-pdf.html" style="color: #4ade80;">Scan to PDF</a>
    </div>
    
    <input type="file" id="upload" accept="application/pdf">
    <label for="upload">üìÅ Click or drag text-based PDF (max 15MB)</label>
    <div id="fileInfo"></div>
    
    <button id="optimizeBtn" disabled>‚ú® Optimize PDF</button>
    
    <div id="progress">
      <div>Optimizing...</div>
      <div id="progressBar"><div id="progressFill"></div></div>
    </div>
    
    <div id="result">
      <div id="resultInfo">
        <h3 id="resultTitle">‚úÖ Optimized!</h3>
        <div id="sizeInfo"></div>
      </div>
    </div>
    
    <div id="downloadLink">
      <a id="download">üì• Download Clean PDF</a>
    </div>
  </div>

  <script>
    const elements = {
      upload: document.getElementById('upload'),
      label: document.querySelector('label[for="upload"]'),
      fileInfo: document.getElementById('fileInfo'),
      optimizeBtn: document.getElementById('optimizeBtn'),
      progress: document.getElementById('progress'),
      progressFill: document.getElementById('progressFill'),
      result: document.getElementById('result'),
      resultTitle: document.getElementById('resultTitle'),
      sizeInfo: document.getElementById('sizeInfo'),
      downloadLink: document.getElementById('downloadLink'),
      download: document.getElementById('download')
    };
    let originalPdf = null;
    let optimizedPdf = null;

    // Drag & drop
    elements.label.addEventListener('dragover', e => { e.preventDefault(); elements.label.classList.add('dragover'); });
    elements.label.addEventListener('dragleave', () => elements.label.classList.remove('dragover'));
    elements.label.addEventListener('drop', e => {
      e.preventDefault(); elements.label.classList.remove('dragover');
      handleFile(e.dataTransfer.files[0]);
    });

    elements.upload.addEventListener('change', e => handleFile(e.target.files[0]));

    function handleFile(file) {
      if (!file?.name?.toLowerCase().endsWith('.pdf')) return showStatus('Select PDF file.', 'error');
      if (file.size > 15*1024*1024) return showStatus('Max 15MB.', 'error');

      originalPdf = file;
      const sizeMB = (file.size / 1024 / 1024).toFixed(1);
      elements.fileInfo.innerHTML = `<strong>${file.name}</strong><br>${sizeMB}MB`;
      elements.optimizeBtn.disabled = false;
      resetResult();
    }

    function resetResult() {
      elements.result.style.display = 'none';
      elements.downloadLink.style.display = 'none';
    }

    elements.optimizeBtn.addEventListener('click', async () => {
      elements.optimizeBtn.disabled = true;
      elements.progress.style.display = 'block';
      resetResult();

      try {
        const arrayBuffer = await originalPdf.arrayBuffer();
        const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer, { ignoreEncryption: true });
        
        elements.progressFill.style.width = '50%';

        const newDoc = await PDFLib.PDFDocument.create();
        const pages = await newDoc.copyPages(pdfDoc, pdfDoc.getPageIndices());
        pages.forEach(page => newDoc.addPage(page));

        elements.progressFill.style.width = '100%';

        optimizedPdf = await newDoc.save({
          useObjectStreams: false,
          addDefaultPage: false
        });

        showResult();
        
      } catch (error) {
        showStatus(`Error: ${error.message.slice(0,50)}`, 'error');
        console.error(error);
      } finally {
        elements.optimizeBtn.disabled = false;
        setTimeout(() => elements.progress.style.display = 'none', 1000);
      }
    });

    function showResult() {
      const originalSize = originalPdf.size;
      const optimizedSize = optimizedPdf.length;
      const reduction = ((1 - optimizedSize / originalSize) * 100);
      
      elements.sizeInfo.innerHTML = `
        <div style="font-size: 1.5em; margin: 10px 0;">
          ${reduction > 0 ? `${reduction.toFixed(1)}% smaller` : 'Same size (already optimized)'}
        </div>
        <div style="opacity: 0.8;">
          Original: ${(originalSize/1024/1024).toFixed(1)}MB ‚Üí New: ${(optimizedSize/1024/1024).toFixed(1)}MB
        </div>
      `;
      
      const blob = new Blob([optimizedPdf], { type: 'application/pdf' });
      const url = URL.createObjectURL(blob);
      elements.download.href = url;
      elements.download.download = `clean-${Date.now()}.pdf`;
      elements.downloadLink.style.display = 'block';
      elements.result.style.display = 'block';
      
      const statusClass = reduction > 5 ? 'success' : 'neutral';
      showStatus(
        reduction > 5 ? `‚úÖ Cleaned ${reduction.toFixed(1)}% junk!` : 
        '‚ÑπÔ∏è Already optimized or image-based PDF', 
        statusClass
      );
    }

    function showStatus(msg, type) {
      const status = document.createElement('div');
      status.className = `status ${type}`;
      status.textContent = msg;
      document.querySelector('.container').appendChild(status);
      setTimeout(() => status.remove(), 5000);
    }
  </script>
</body>
</html>
