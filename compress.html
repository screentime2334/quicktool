<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JPEG Compressor - QuickTools.in</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-green-50 to-emerald-50 min-h-screen p-8">
<div class="max-w-4xl mx-auto">
<h1 class="text-5xl font-bold text-center mb-8 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent">ğŸ—œï¸ JPEG Compressor</h1>

<!-- ONE BUTTON UPLOAD -->
<div style="text-align:center; margin: 50px 0;">
  <input type="file" id="file" accept="image/jpeg,image/jpg" style="display:none;" onchange="uploadFile()">
  <button onclick="document.getElementById('file').click()" 
          style="background: linear-gradient(45deg, #16a34a, #059669); color:white; padding: 20px 40px; font-size: 24px; font-weight: bold; border-radius: 20px; border: none; box-shadow: 0 10px 30px rgba(34,197,94,0.4); cursor:pointer; margin:20px;">
    ğŸ“ SELECT JPEG IMAGE
  </button>
  <p style="color:#6b7280; font-size:18px;">Click above â†’ Choose JPG â†’ Compress 90%</p>
</div>

<!-- PREVIEW -->
<div id="preview" style="display:none;">
  <div style="background:white; padding:30px; border-radius:20px; box-shadow:0 20px 40px rgba(0,0,0,0.1); margin:30px 0;">
    <div style="display:flex; gap:40px; align-items:center; flex-wrap:wrap;">
      <img id="showimg" style="max-width:400px; max-height:400px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.2);">
      <div>
        <h3 style="font-size:28px; font-weight:bold; color:#374151; margin-bottom:10px;" id="filename">-</h3>
        <div style="font-size:36px; font-weight:bold; color:#059669;" id="filesize">-</div>
      </div>
    </div>
  </div>
</div>

<!-- CONTROLS -->
<div id="controls" style="display:none;">
  <div style="background:white; padding:30px; border-radius:20px; box-shadow:0 20px 40px rgba(0,0,0,0.1); margin:30px 0;">
    <h2 style="text-align:center; font-size:32px; font-weight:bold; color:#374151; margin-bottom:30px;">Compression Settings</h2>
    
    <div style="display:flex; gap:30px; margin-bottom:30px;">
      <div style="flex:1;">
        <label style="display:block; font-weight:bold; margin-bottom:10px;">Target Size</label>
        <input type="range" id="targetkb" min="10" max="150" value="40" style="width:100%;">
        <div style="display:flex; justify-content:space-between; margin-top:5px;">
          <span>10KB</span>
          <span id="targetshow">40 KB</span>
          <span>150KB</span>
        </div>
      </div>
      <div style="flex:1;">
        <label style="display:block; font-weight:bold; margin-bottom:10px;">Quality</label>
        <input type="range" id="quality" min="10" max="90" value="70" style="width:100%;">
        <div style="display:flex; justify-content:space-between; margin-top:5px;">
          <span>Low</span>
          <span id="qualityshow">70%</span>
          <span>High</span>
        </div>
      </div>
    </div>
    
    <button onclick="startCompress()" 
            style="width:100%; background:linear-gradient(45deg, #16a34a, #059669); color:white; padding:25px; font-size:24px; font-weight:bold; border-radius:20px; border:none; box-shadow:0 15px 40px rgba(34,197,94,0.4); cursor:pointer;">
      ğŸ—œï¸ COMPRESS IMAGE
    </button>
  </div>
</div>

<!-- LOADING -->
<div id="loading" style="display:none;">
  <div style="text-align:center; padding:60px;">
    <div style="width:80px; height:80px; border:6px solid #d1d5db; border-top:6px solid #16a34a; border-radius:50%; animation:spin 1s linear infinite; margin:0 auto 30px;"></div>
    <h2 style="font-size:32px; font-weight:bold; color:#16a34a;">Compressing...</h2>
  </div>
</div>

<!-- RESULT -->
<div id="result" style="display:none;">
  <div style="display:flex; gap:40px; margin:30px 0; flex-wrap:wrap;">
    <div style="flex:1; min-width:300px;">
      <h3 style="text-align:center; font-size:24px; font-weight:bold; color:#6b7280; margin-bottom:20px;">ğŸ“ Original</h3>
      <img id="origresult" style="width:100%; max-height:300px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.2);">
      <div id="origsize" style="text-align:center; font-size:32px; font-weight:bold; color:#6b7280; margin-top:15px;">-</div>
    </div>
    <div style="flex:1; min-width:300px;">
      <h3 style="text-align:center; font-size:24px; font-weight:bold; color:#059669; margin-bottom:20px;">âœ… Compressed</h3>
      <img id="newresult" style="width:100%; max-height:300px; border-radius:15px; box-shadow:0 10px 30px rgba(34,197,94,0.3);">
      <div id="newsize" style="text-align:center; font-size:32px; font-weight:bold; color:#059669; margin-top:15px;">-</div>
      <div id="saved" style="text-align:center; font-size:20px; font-weight:bold; color:#059669;">-</div>
    </div>
  </div>
  <div style="text-align:center;">
    <button onclick="downloadFile()" 
            style="background:linear-gradient(45deg, #059669, #10b981); color:white; padding:25px 50px; font-size:24px; font-weight:bold; border-radius:20px; border:none; box-shadow:0 15px 40px rgba(16,185,129,0.4); cursor:pointer;">
      ğŸ’¾ DOWNLOAD COMPRESSED IMAGE
    </button>
    <button onclick="resetAll()" style="background:#6b7280; color:white; padding:15px 30px; font-size:18px; font-weight:bold; border-radius:15px; border:none; margin-left:20px; cursor:pointer;">
      New Image
    </button>
  </div>
</div>
</div>

<style>
@keyframes spin { 0% { transform:rotate(0deg); } 100% { transform:rotate(360deg); } }
</style>

<script>
let currentImage;
let compressedImage;
let originalSize;

function uploadFile() {
  const file = document.getElementById('file').files[0];
  if (file && file.type === 'image/jpeg') {
    originalSize = (file.size / 1024).toFixed(1);
    const reader = new FileReader();
    reader.onload = (e) => {
      currentImage = e.target.result;
      document.getElementById('showimg').src = currentImage;
      document.getElementById('filename').innerHTML = file.name + ' (' + originalSize + ' KB)';
      document.getElementById('preview').style.display = 'block';
      document.getElementById('controls').style.display = 'block';
    };
    reader.readAsDataURL(file);
  } else {
    alert('Please select a JPEG file');
  }
}

document.getElementById('targetkb').oninput = function() {
  document.getElementById('targetshow').innerHTML = this.value + ' KB';
};

document.getElementById('quality').oninput = function() {
  document.getElementById('qualityshow').innerHTML = this.value + '%';
};

function startCompress() {
  document.getElementById('loading').style.display = 'block';
  document.getElementById('controls').style.display = 'none';
  
  const img = new Image();
  img.onload = () => {
    const canvas = document.createElement('canvas');
    canvas.width = img.width;
    canvas.height = img.height;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(img, 0, 0);
    
    let q = parseInt(document.getElementById('quality').value);
    const target = parseInt(document.getElementById('targetkb').value);
    
    function compressWithQuality(quality) {
      canvas.toBlob((blob) => {
        const size = (blob.size / 1024).toFixed(1);
        if (size <= target || quality <= 10) {
          compressedImage = URL.createObjectURL(blob);
          showResult(size);
        } else {
          compressWithQuality(quality - 5);
        }
      }, 'image/jpeg', quality / 100);
    }
    
    compressWithQuality(q);
  };
  img.src = currentImage;
}

function showResult(size) {
  document.getElementById('origresult').src = currentImage;
  document.getElementById('newresult').src = compressedImage;
  document.getElementById('origsize').innerHTML = originalSize + ' KB';
  document.getElementById('newsize').innerHTML = size + ' KB';
  document.getElementById('saved').innerHTML = 'Saved ' + (originalSize - size).toFixed(1) + ' KB';
  
  document.getElementById('loading').style.display = 'none';
  document.getElementById('result').style.display = 'block';
}

function downloadFile() {
  const a = document.createElement('a');
  a.href = compressedImage;
  a.download = 'compressed.jpg';
  a.click();
}

function resetAll() {
  document.getElementById('file').value = '';
  document.getElementById('preview').style.display = 'none';
  document.getElementById('controls').style.display = 'none';
  document.getElementById('result').style.display = 'none';
  document.getElementById('loading').style.display = 'none';
}
</script>
</body>
</html>
